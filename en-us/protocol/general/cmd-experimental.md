# 实验室命令

实验室命令，指开发人员试验性质地修改功能模型，需要参数控制，但由于功能模块未成熟稳定，同时功能不对用户公开，但可以提供最终协议数据到用户自行设置功能来临时测试使用。

## Key列表

| Value(HEX) | 功能描述     | 可写 | 可读 | 通知 |
| ---------- | ------------ | ---- | ---- | ---- |
| 0x10       | 报警项配置   |      |      |      |
| 0x10       | 报警通用设置 |      |      |      |

## 功能描述

---

### 报警项配置

* 功能描述

报警项配置，用来控制报警功能过程的一个执行约束，使报警流程报需求功能流程执行。针对每个报警项，提供

* 写请求数据结构

| Byte No. | Description                                                                                                                   |
| -------- | ----------------------------------------------------------------------------------------------------------------------------- |
| 1        | length                                                                                                                        |
| 2        | key                                                                                                                           |
| 3        | event, 事件类型，每个报告由算法或动作产生一个事件，根据事件分别使用不同的上报处理                                             |
| 4        | priority, 优先级，用于分类事件的重要性，高4bits用于区分组，低4bits用于区分组内的优先级。                                      |
| 5        | dials repeat, 重复拨号次数，即当前报警过程中需要执行的拨号次数。<br />0 - 表示不拨号<br />others - 执行n次循环拨号            |
| 6-7      | SMS template 短信模板，用于指定当前事件使用的短信内容模板。<br />0 - 表示不发送短信<br />others - 使用的短信内容模板          |
| 8-9      | SMS fast template 快速短信模板，用于指定当前事件使用的短信内容模板。<br />0 - 表示不发送短信<br />others - 使用的短信内容模板 |
| 10-11    | upload template 上传服务器模板，上传服务器时使用的数据格式                                                                    |
| 12-13    | upload fast template 快速上传服务器模板，上传服务器时使用的数据格式                                                           |
| 14-17    | 标志, 额外的配置标志                                                                                                          |

标志的位域定义:

| bit no | Description                                                                                                                    |
| ------ | ------------------------------------------------------------------------------------------------------------------------------ |
| 0      | enabled, 事件使能位，用于启用/关闭当前事件报警功能。<br />0 - 关闭<br />1 - 打开                                              |
| 1      | action after prompt 是否在播放完提示后才执行拨号、短信、上传服务器工作。<br />0 - 直接执行<br />1 - 需要等待提示音结束后才执行 |
| 2      | audio prompt 是否启用提示音<br />0 - 关闭<br />1 - 打开                                                                        |
| 3      | call audio prompt 拨号前是否需要提示音<br />0 - 拨号前不播放提示音<br />1 - 拨号前先播放提示音                                 |
| 4      | SMS 是否发送短信通知联系人<br />0 - 不发送<br />1 - 发送                                                                       |
| 5      | SMS fast 是否发送短通知联系人                                                                                                  |
| 6      | upload server 事件是否上报服务器                                                                                               |
| 7      | upload fast to server 事件是否上报服务器                                                                                       |
| 8-9    | location 定位模式，当前事件是否启动定位功能<br />0 - 不启动<br />1 - 单次定位<br />2 - 连续定位                                |
| 10     |                                                                                                                                |
|        |                                                                                                                                |

---

### 报警基础配置

* 功能描述

用于设置报警过程的全局配置，

* 写请求数据结构

| Byte No. | Description                                   |
| -------- | --------------------------------------------- |
| 1        | length                                        |
| 2        | key                                           |
| 3        | 上传类型<br />0- GSM TCPIP<br />1- WiFi TCPIP |
| 4        | 拨号优先级, 范围:[0, 255], 值越小，优先级越高 |
| 5        | 短信优先级, 范围:[0, 255], 值越小，优先级越高 |
| 6        | 上报优先级, 范围:[0, 255], 值越小，优先级越高 |

备注：

> 1. 上传类型，指当前上传服务器优先使用哪个类型来与服务器通讯，并将数据上传到服务器上。
> 2. 拨号优先级、短信优先级、上报优先级，用于约束在报警过程，哪部分功能优先执行或同时执行。
